
<!DOCTYPE html>
<html lang="en">
<head>
<title>Fox Cricket</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
<meta name="referrer" content="no-referrer"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css"/>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.js"></script>
<style>
html,body{margin:0;padding:0;width:100%;height:100%;background:#000;overflow:hidden}
.video-container{width:100%;height:100%;display:flex;align-items:center;justify-content:center}
video{width:100%;height:100%;background:#000;object-fit:contain !important;max-width:100%;max-height:100%}
video:-webkit-full-screen,video:-moz-full-screen,video:fullscreen{object-fit:contain !important}
.plyr{width:100%;height:100%}
.plyr__poster{background-size:contain !important;background-position:center center !important;background-repeat:no-repeat !important}
.plyr__video-wrapper{width:100%;height:100%}
</style>
</head>
<body>
<div class="video-container">
<video id="player" controls playsinline preload="metadata" muted poster="https://variety.com/wp-content/uploads/2017/12/hotstar.jpg?w=1000&h=525&crop=1"></video>
</div>
<script>
document.addEventListener("DOMContentLoaded",()=>{
const src = new URLSearchParams(location.search).get("url") || "https://sayan-proxy.pages.dev/Hotstar";
const video = document.getElementById("player");
const MAX_TRIES = 7;
let tries = parseInt(sessionStorage.getItem("hls_reload") || "0");
let streamReady = false;
function reloadPage(){
    if(streamReady) return;
    if(tries < MAX_TRIES){
        tries++;
        sessionStorage.setItem("hls_reload", tries);
        location.reload();
    }
}
const loadTimer = setTimeout(()=>{ if(!streamReady) reloadPage(); },7000);
function markLoaded(){
    if(streamReady) return;
    streamReady = true;
    clearTimeout(loadTimer);
    sessionStorage.removeItem("hls_reload");
}
function getDefaultQuality(levels){
    let qs = [...new Set(levels.map(l=>l.height))].sort((a,b)=>b-a);
    let q = qs.find(x=>x<=720);
    return q || qs[qs.length-1];
}
if(Hls.isSupported()){
    const hls = new Hls({
        maxBufferLength:120,
        maxMaxBufferLength:240,
        backBufferLength:90,
        maxBufferSize:120000000,
        lowLatencyMode:false,
        capLevelToPlayerSize:true,
        enableWorker:true
    });
    hls.loadSource(src);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,(_,data)=>{
        markLoaded();
        let qualities = [...new Set(data.levels.map(l=>l.height))].sort((a,b)=>b-a);
        if(qualities.length === 0) qualities = [360];
        let defaultQ = getDefaultQuality(data.levels);
        let defaultIndex = data.levels.findIndex(l => l.height === defaultQ);
        if(defaultIndex !== -1) hls.startLevel = defaultIndex;
        const player = new Plyr(video,{
            muted:true,
            volume:1,
            controls:["play-large","play","progress","current-time","mute","volume","settings","pip","fullscreen"],
            quality:{
                default: defaultQ,
                options: qualities,
                forced:true,
                onChange:q=>{
                    data.levels.forEach((l,i)=>{ if(l.height===q) hls.currentLevel=i; });
                }
            }
        });
        player.on("play",()=>{
            video.muted=false;
            video.volume=1;
        });
    });
    hls.on(Hls.Events.ERROR,(e,data)=>{
        if(data.fatal && !streamReady) reloadPage();
    });
}else{
    video.src = src;
    video.addEventListener("loadedmetadata", markLoaded);
    const player = new Plyr(video,{
        muted:true,
        volume:1,
        controls:["play-large","play","progress","current-time","mute","volume","settings","pip","fullscreen"]
    });
    player.on("play",()=>{
        video.muted=false;
        video.volume=1;
    });
}
});
</script>
    <script>(function(s){s.dataset.zone='10603308',s.src='https://bvtpk.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
<!-- Cloudflare Pages Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "7066eff086604cba8cfb76441016ea94"}'></script><!-- Cloudflare Pages Analytics --></body>
</html>
